"
" Author: Frank
" Repository: https://github.com/Frank-Zuo/vim_config
" Create Date: 2019-03-07
"
" NOTE: Only use the config which you know ti's meaning.
"
" Vundle åŸºæœ¬è¯´æ˜ï¼š
" 1ã€å®‰è£…: git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
" 2ã€æ’ä»¶å®‰è£…æ–¹å¼
"    å®‰è£…æ’ä»¶çš„å‘½ä»¤å¿…é¡»æ”¾åœ¨ vundle#begin å’Œ vundle#end ä¹‹é—´.
"   2.1 ä» GitHub è¿›è¡Œå®‰è£…
"       æ ¼å¼: Plugin 'ç”¨æˆ·å/æ’ä»¶ä»“åº“å'
"       ç¤ºä¾‹: Plugin 'tpope/vim-fugitive'
"   2.2 ä» http://vim-scripts.org/vim/scripts.html è¿›è¡Œå®‰è£…
"       æ ¼å¼: Plugin 'æ’ä»¶åç§°'            å®é™…ä¸Šæ˜¯ Plugin 'vim-scripts/æ’ä»¶ä»“åº“å' åªæ˜¯æ­¤å¤„çš„ç”¨æˆ·åå¯ä»¥çœç•¥
"       ç¤ºä¾‹: Plugin 'L9'
"   2.3 ä»ä¸åœ¨ GitHub ä¸Šçš„å¦ä¸€ä¸ª git è½¯ä»¶åº“è¿›è¡Œå®‰è£…
"       æ ¼å¼: Plugin 'git://git.another_repo.com/plugin'
"       ç¤ºä¾‹: Plugin 'git://git.wincent.com/command-t.git'
"   2.4 ä»æœ¬åœ°æ–‡ä»¶è¿›è¡Œå®‰è£…
"       æ ¼å¼: Plugin 'file:///+æœ¬åœ°æ’ä»¶ä»“åº“ç»å¯¹è·¯å¾„'
"       ç¤ºä¾‹: Plugin 'file:///home/gmarik/path/to/plugin'
"   2.5 æ’ä»¶åœ¨ä»“åº“çš„å­ç›®å½•ä¸­
"       æ ¼å¼: Plugin 'ç”¨æˆ·å/æ’ä»¶ä»“åº“å',{'rtp': 'å­ç›®å½•'}     -- rtp: runtimepath
"       ç¤ºä¾‹: Plugin 'rstacruz/sparkup', {'rtp': 'vim/'}       èŒƒä¾‹æ’ä»¶åœ¨ sparkup/vim ç›®å½•ä¸‹
"   2.6 æ’ä»¶å‘½åå†²çªï¼Œæ›´åæ’ä»¶
"       æ ¼å¼: Plugin 'user/plugin', {'name': 'newPlugin'}
"       ç¤ºä¾‹: Plugin 'ascenator/L9', {'name': 'newL9'}         å·²ç»å®‰è£… L9ï¼Œå†æ¬¡å®‰è£…å¦ä¸€ä¸ª L9
" 3ã€å¸¸ç”¨å‘½ä»¤
"   3.1 åˆ—å‡ºæ‰€æœ‰å·²é…ç½®çš„æ’ä»¶
"       :PluginList
"   3.2 å®‰è£…ä¸€ä¸ªæ–°çš„æ’ä»¶
"       :PluginInstall                 - å®‰è£… .vimrc.bundles ä¸­åˆ—å‡ºæ¥çš„æ‰€æœ‰æ’ä»¶ï¼Œè¿½åŠ  `!` ç”¨ä»¥æ›´æ–°
"       :PluginInstall <plugin-name>   - åªå®‰è£…æŸä¸€ä¸ªç‰¹å®šçš„æ’ä»¶ï¼Œåªéœ€è¦ä¼ é€’å…¶åç§°
"   3.3 æ›´æ–°æ’ä»¶
"       :PluginUpdate
"   3.4 æ¸…ç†é—²ç½®æœªç”¨çš„æ’ä»¶
"       :PluginClean                   - æ¸…é™¤æœªä½¿ç”¨æ’ä»¶,éœ€è¦ç¡®è®¤; è¿½åŠ  `!` è‡ªåŠ¨æ‰¹å‡†ç§»é™¤æœªä½¿ç”¨æ’ä»¶
"   3.5 æœç´¢æ’ä»¶
"       :PluginSearch <text-list>      - æœç´¢è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åœ¨äº¤äº’å¼åˆ†å±ä¸Šå®‰è£…ã€æ¸…ç†ã€ç ”ç©¶æˆ–é‡æ–°è£…å…¥åŒä¸€åˆ—è¡¨ã€‚æƒ³è‡ªåŠ¨è£…å…¥æ’ä»¶ï¼Œéœ€å°†æ’ä»¶æ·»åŠ åˆ° .vimrc.bundles æ–‡ä»¶
"       :PluginSearch foo              - æœç´¢ foo ; è¿½åŠ  `!` æ¸…é™¤æœ¬åœ°ç¼“å­˜
"       :PluginSearch taglist          - æœç´¢å®Œæˆåï¼Œå¯ä»¥æŒ‰ä¸‹'i'è¿›è¡Œå®‰è£…
"

set nocompatible              " å»é™¤VIä¸€è‡´æ€§,å¿…é¡»
filetype off                  " å¿…é¡»

" è®¾ç½®åŒ…æ‹¬ vundle å’Œåˆå§‹åŒ–ç›¸å…³çš„ runtimepath
set rtp+=~/.vim/bundle/Vundle.vim

"********************************************************************************
" æ’ä»¶åˆ—è¡¨
"********************************************************************************

call vundle#begin()
" å¦ä¸€ç§é€‰æ‹©, æŒ‡å®šä¸€ä¸ª vundle å®‰è£…æ’ä»¶çš„è·¯å¾„
"call vundle#begin('~/some/path/here')

"********************************************************************************
" è®© vundle ç®¡ç†æ’ä»¶ç‰ˆæœ¬,å¿…é¡»
Plugin 'VundleVim/Vundle.vim'

"********************************************************************************
" ä¸»é¢˜ solarized
Plugin 'altercation/vim-colors-solarized'
let g:solarized_termtrans  = 1             " ä½¿ç”¨ termnal èƒŒæ™¯
"let g:solarized_termcolors = 256           " ä½¿ç”¨ 256 é…è‰²
let g:solarized_visibility = "low"         " set list æ˜¾ç¤ºç‰¹æ®Šç¬¦å·çš„æ–¹å¼

" ä¸»é¢˜ molokai
Plugin 'tomasr/molokai'
let g:molokai_original = 1   " ä½¿ç”¨åŸå§‹é…è‰²æ–¹æ¡ˆ

"********************************************************************************
" ç›®å½•æ ‘ nerdtree
" <leader>nt æ‰“å¼€ nerdtree
" q          å…³é—­ nerdtree
Plugin 'scrooloose/nerdtree'
let NERDTreeHighlightCursorline = 1       " é«˜äº®å½“å‰è¡Œ
let NERDTreeShowLineNumbers     = 1       " æ˜¾ç¤ºè¡Œå·
" å¿½ç•¥åˆ—è¡¨ä¸­çš„æ–‡ä»¶
let NERDTreeIgnore=[ '\.pyc$', '\.pyo$', '\.obj$', '\.o$', '\.egg$', '^\.git$', '^\.repo$', '^\.svn$', '^\.hg$' ]

" å½“æ‰“å¼€ VIMï¼Œæ²¡æœ‰æŒ‡å®šæ–‡ä»¶æ—¶å’Œæ‰“å¼€ä¸€ä¸ªç›®å½•æ—¶ï¼Œæ‰“å¼€ NERDTree
"autocmd StdinReadPre * let s:std_in=1
"autocmd VimEnter * if argc() == 0 && !exists("s:std_in") | NERDTree | endif
"autocmd VimEnter * if argc() == 1 && isdirectory(argv()[0]) && !exists("s:std_in") | exe 'NERDTree' argv()[0] | wincmd p | ene | exe 'cd '.argv()[0] | endif

" å…³é—­ NERDTreeï¼Œå½“æ²¡æœ‰æ–‡ä»¶æ‰“å¼€çš„æ—¶å€™
autocmd bufenter * if (winnr("$") == 1 && exists("b:NERDTreeType") && b:NERDTreeType == "primary") | q | end

"********************************************************************************
" æ ‡ç­¾å¯¼èˆª tagbar
" åœ¨ tagbar ä¸€æ å†…è¾“å…¥ F1 å¯ä»¥æŸ¥çœ‹å¿«æ·æ–¹å¼
" æ’ä»¶ä¾èµ– ctagsï¼Œå®‰è£…å‘½ä»¤: $ sudo apt install ctags
Plugin 'majutsushi/tagbar'
let g:tagbar_ctags_bin = 'ctags' " tagbar ä¾èµ– ctags æ’ä»¶
let g:tagbar_width     = 30      " è®¾ç½® tagbar çš„å®½åº¦ä¸º 30 åˆ—ï¼Œé»˜è®¤ 40 åˆ—
let g:tagbar_autofocus = 1       " æ‰“å¼€ tagbar æ—¶å…‰æ ‡åœ¨ tagbar é¡µé¢å†…ï¼Œé»˜è®¤åœ¨ vim æ‰“å¼€çš„æ–‡ä»¶å†…
let g:tagbar_left      = 1       " è®© tagbar åœ¨é¡µé¢å·¦ä¾§æ˜¾ç¤ºï¼Œé»˜è®¤å³è¾¹
"let g:tagbar_sort      = 0       " æ ‡ç­¾ä¸æ’åºï¼Œé»˜è®¤æ’åº

" æ ‡ç­¾åˆ—è¡¨ taglist
Plugin 'vim-scripts/taglist.vim'
let Tlist_Show_One_File           = 1    " åªæ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„tags
let Tlist_GainFocus_On_ToggleOpen = 1    " æ‰“å¼€ Taglist çª—å£æ—¶ï¼Œå…‰æ ‡è·³åˆ° Taglist çª—å£
let Tlist_Exit_OnlyWindow         = 1    " å¦‚æœTaglistçª—å£æ˜¯æœ€åä¸€ä¸ªçª—å£åˆ™é€€å‡ºVim
let Tlist_Use_Left_Window         = 1    " åœ¨å·¦ä¾§çª—å£ä¸­æ˜¾ç¤º
let Tlist_File_Fold_Auto_Close    = 1    " è‡ªåŠ¨æŠ˜å 
let Tlist_Auto_Update             = 1    " æ‰“å¼€æ–°æ–‡ä»¶æˆ–ä¿®æ”¹æ–‡ä»¶åè‡ªåŠ¨æ›´æ–°æ ‡ç­¾

"********************************************************************************
" æ¨¡ç³Šæœç´¢
Plugin 'junegunn/fzf', { 'dir': '~/.vim/bundle/fzf', 'do': './install --all' }
Plugin 'junegunn/fzf.vim'

" è°ƒç”¨ Rg è¿›è¡Œæœç´¢ï¼ŒåŒ…å«éšè—æ–‡ä»¶
" æ­¤å‘½ä»¤ä¾èµ– ripgrepï¼Œripgrep å®‰è£…è¯·å‚ç…§ https://github.com/BurntSushi/ripgrep
command! -bang -nargs=* Rg
    \ call fzf#vim#grep(
    \   'rg --column --line-number --no-heading --color=always --smart-case '.shellescape(<q-args>), 1,
    \   <bang>0 ? fzf#vim#with_preview('up:60%')
    \           : fzf#vim#with_preview('right:50%:hidden', '?'),
    \   <bang>0)

"********************************************************************************
" å¿«é€Ÿå®šä½
Plugin 'easymotion/vim-easymotion'
let g:EasyMotion_do_mapping = 0  " Disable default mappings
let g:EasyMotion_smartcase  = 1  " Turn on case-insensitive feature


"********************************************************************************
" è‡ªåŠ¨è¡¥å…¨ YouCompleteMe
" æ’ä»¶ä¾èµ–: build-essential cmake python3-dev
" è¯­è¨€æ”¯æŒå®‰è£…ï¼š
" $ cd ~/.vim/bundle/YouCompleteMe
" $ python3 install.py --clang-completer   -- C
" $ python3 install.py --java-completer    -- java,éœ€è¦å®‰è£… JDK8
Plugin 'Valloric/YouCompleteMe'
" å¯»æ‰¾å…¨å±€é…ç½®æ–‡ä»¶
let g:ycm_global_ycm_extra_conf = '~/.vim/bundle/YouCompleteMe/third_party/ycmd/.ycm_extra_conf.py'
let g:ycm_min_num_of_chars_for_completion               = 2 " è¾“å…¥ç¬¬ 2 ä¸ªå­—ç¬¦å¼€å§‹è¡¥å…¨
let g:ycm_seed_identifiers_with_syntax                  = 1 " è¯­æ³•å…³é”®å­—è¡¥å…¨
let g:ycm_complete_in_comments                          = 1 " åœ¨æ³¨é‡Šä¸­ä¹Ÿå¯ä»¥è¡¥å…¨
let g:ycm_complete_in_strings                           = 1 " åœ¨å­—ç¬¦ä¸²è¾“å…¥ä¸­ä¹Ÿèƒ½è¡¥å…¨
let g:ycm_collect_identifiers_from_tag_files            = 1 " ä½¿ç”¨ ctags ç”Ÿæˆçš„ tags æ–‡ä»¶
let g:ycm_collect_identifiers_from_comments_and_strings = 1 " æ³¨é‡Šå’Œå­—ç¬¦ä¸²ä¸­çš„æ–‡å­—ä¹Ÿä¼šè¢«æ”¶å…¥è¡¥å…¨
let g:ycm_cache_omnifunc                                = 0 " æ¯æ¬¡é‡æ–°ç”ŸæˆåŒ¹é…é¡¹ï¼Œç¦æ­¢ç¼“å­˜åŒ¹é…é¡¹
let g:ycm_use_ultisnips_completer                       = 0 " ä¸æŸ¥è¯¢ ultisnips æä¾›çš„ä»£ç æ¨¡æ¿è¡¥å…¨ï¼Œå¦‚æœéœ€è¦ï¼Œè®¾ç½®æˆ 1 å³å¯
let g:ycm_show_diagnostics_ui                           = 0 " ç¦ç”¨è¯­æ³•æ£€æŸ¥

let g:ycm_key_list_select_completion   = ['<Down>']   " é€‰æ‹©ä¸‹ä¸€æ¡è¡¥å…¨ï¼ŒDefault: ['<TAB>', '<Down>']
let g:ycm_key_list_previous_completion = ['<Up>']     " é€‰æ‹©ä¸Šä¸€æ¡è¡¥å…¨ï¼ŒDefault: ['<S-TAB>', '<Up>']
let g:ycm_key_list_stop_completion     = ['<Enter>']  " ä¸­æ­¢æ­¤æ¬¡è¡¥å…¨ï¼ŒDefault: ['<C-y>']

" è‡ªå®šä¹‰ä»£ç ç‰‡æ®µè¡¥å…¨
Plugin 'SirVer/ultisnips'
Plugin 'honza/vim-snippets'  " ç‰‡æ®µ
let g:UltiSnipsExpandTrigger       = "<c-tab>"     " ä»£ç ç‰‡æ®µè¡¥å…¨è§¦å‘
let g:UltiSnipsListSnippets        = "<c-\>"       " åˆ—å‡ºè¡¥å…¨å¯é€‰åˆ—è¡¨
let g:UltiSnipsJumpForwardTrigger  = "<c-j>"       " ä¸‹ä¸€æ¡è¡¥å…¨
let g:UltiSnipsJumpBackwardTrigger = "<c-k>"       " ä¸Šä¸€æ¡è¡¥å…¨
let g:UltiSnipsEditSplit           = "horizontal"  " how the edit window is opened

"********************************************************************************
" ä»£ç å¯¹é½
Plugin 'godlygeek/tabular'

"********************************************************************************
" å¿«é€Ÿæ·»åŠ /åˆ é™¤æ³¨é‡Š
Plugin 'scrooloose/nerdcommenter'
let g:NERDSpaceDelims            = 1                                    " åœ¨æ³¨é‡Šç¬¦å·ååŠ ä¸€ä¸ªç©ºæ ¼
let g:NERDCompactSexyComs        = 1                                    " ç´§å‡‘æ’å¸ƒå¤šè¡Œæ³¨é‡Š
let g:NERDDefaultAlign           = 'left'                               " é€è¡Œæ³¨é‡Šå·¦å¯¹é½
let g:NERDAltDelims_java         = 1                                    " JAVA è¯­è¨€ä½¿ç”¨é»˜è®¤çš„æ³¨é‡Šç¬¦å·
let g:NERDCustomDelimiters       = {'c': {'left': '/*', 'right': '*/'}} " C è¯­è¨€æ³¨é‡Šç¬¦å·
let g:NERDCommentEmptyLines      = 1                                    " å…è®¸ç©ºè¡Œæ³¨é‡Š
let g:NERDTrimTrailingWhitespace = 1                                    " å–æ¶ˆæ³¨é‡Šæ—¶åˆ é™¤è¡Œå°¾ç©ºæ ¼
let g:NERDToggleCheckAllLines    = 1                                    " æ£€æŸ¥é€‰ä¸­çš„è¡Œæ“ä½œæ˜¯å¦æˆåŠŸ

"********************************************************************************
" ä»£ç åŠ¨æ€æ£€æŸ¥
Plugin 'w0rp/ale'
let g:ale_lint_on_text_changed       = 'normal'                     " ä»£ç æ›´æ”¹åå¯åŠ¨æ£€æŸ¥
let g:ale_lint_on_insert_leave       = 1                            " é€€å‡ºæ’å…¥æ¨¡å¼å³æ£€æŸ¥
let g:ale_sign_column_always         = 1                            " æ€»æ˜¯æ˜¾ç¤ºåŠ¨æ€æ£€æŸ¥ç»“æœ
let g:ale_sign_error                 = '>>'                         " error å‘Šè­¦ç¬¦å·
let g:ale_sign_warning               = '--'                         " warning å‘Šè­¦ç¬¦å·
let g:ale_echo_msg_error_str         = 'E'                          " é”™è¯¯æ˜¾ç¤ºå­—ç¬¦
let g:ale_echo_msg_warning_str       = 'W'                          " è­¦å‘Šæ˜¾ç¤ºå­—ç¬¦
let g:ale_echo_msg_format            = '[%linter%] %s [%severity%]' " å‘Šè­¦æ˜¾ç¤ºæ ¼å¼

" C è¯­è¨€é…ç½®æ£€æŸ¥å‚æ•°
let g:ale_c_gcc_options              = '-Wall -Werror -O2 -std=c11'
let g:ale_c_clang_options            = '-Wall -Werror -O2 -std=c11'
let g:ale_c_cppcheck_options         = ''

" C++ é…ç½®æ£€æŸ¥å‚æ•°
let g:ale_cpp_gcc_options            = '-Wall -Werror -O2 -std=c++14'
let g:ale_cpp_clang_options          = '-Wall -Werror -O2 -std=c++14'
let g:ale_cpp_cppcheck_options       = ''

"ä½¿ç”¨clangå¯¹cå’Œc++è¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œå¯¹pythonä½¿ç”¨pylintè¿›è¡Œè¯­æ³•æ£€æŸ¥
let g:ale_linters = {
\   'c++': ['clang', 'gcc'],
\   'c': ['clang', 'gcc'],
\   'python': ['pylint'],
\}

"********************************************************************************
" çŠ¶æ€æ ä¼˜åŒ– airline
Plugin 'vim-airline/vim-airline'
let g:airline_powerline_fonts                   = 1 " ä½¿ç”¨ powerline æ‰“è¿‡è¡¥ä¸çš„å­—ä½“
let g:airline#extensions#tabline#enabled        = 1 " å¼€å¯ tabline
let g:airline#extensions#tabline#buffer_nr_show = 1 " æ˜¾ç¤º buffer ç¼–å·
let g:airline#extensions#ale#enabled            = 1 " enable ale integration

" çŠ¶æ€æ æ˜¾ç¤ºå›¾æ ‡è®¾ç½®
if !exists('g:airline_symbols')
    let g:airline_symbols = {}
endif

let g:airline_left_sep          = 'â®€'
let g:airline_left_alt_sep      = 'â®'
let g:airline_right_sep         = 'â®‚'
let g:airline_right_alt_sep     = 'â®ƒ'
let g:airline_symbols.crypt     = 'ğŸ”’'
let g:airline_symbols.linenr    = 'â­¡'
let g:airline_symbols.branch    = 'â­ '
let g:airline_symbols.readonly  = 'î‚¢'

"********************************************************************************
" ä¸ªäºº wiki
" å¸¸ç”¨å¿«æ·é”®ï¼ˆnormal æ¨¡å¼ï¼‰ï¼š
" <Leader>ww             -- æ‰“å¼€é»˜è®¤çš„ wiki ç›®å½•æ–‡ä»¶
" <Leader>wt             -- åœ¨æ–°æ ‡ç­¾ï¼ˆTabï¼‰ä¸­æ‰“å¼€ wiki ç›®å½•æ–‡ä»¶
" <Leader>ws             -- åœ¨å¤šä¸ª wiki ä¸­é€‰æ‹©å¹¶æ‰“å¼€è¯¥ wiki çš„ç›®å½•æ–‡ä»¶
" <Leader>wd             -- åˆ é™¤å½“å‰ wiki æ–‡ä»¶
" <Leader>wr             -- é‡å‘½åå½“å‰ wiki æ–‡ä»¶
" <Enter>                -- åˆ›å»ºæˆ–æ‰“å¼€ wiki é“¾æ¥
" <Shift-Enter>          -- å…ˆä¸Šä¸‹åˆ†å±å†æ‰“å¼€ wiki é“¾æ¥ï¼ˆè‹¥éé“¾æ¥åˆ™å…ˆåˆ›å»ºï¼‰
" <Ctrl-Enter>           -- å…ˆå·¦å³åˆ†å±å†æ‰“å¼€ wiki é“¾æ¥ï¼ˆè‹¥éé“¾æ¥åˆ™å…ˆåˆ›å»ºï¼‰
" <Backspace>            -- è¿”å›ä¹‹å‰æµè§ˆçš„ wiki æ–‡ä»¶
" <Tab>                  -- è·³åˆ°æœ¬æ–‡ä»¶ä¸­ä¸‹ä¸€ä¸ª wiki é“¾æ¥
" <Shift-Tab>            -- è·³åˆ°æœ¬æ–‡ä»¶ä¸­ä¸Šä¸€ä¸ª wiki é“¾æ¥
"
" å¸¸ç”¨å‘½ä»¤
" :Vimwiki2HTML          -- å°†å½“å‰ wiki æ–‡ä»¶è½¬æ¢æˆ HTML ç½‘é¡µ
" :VimwikiAll2HTML       -- æŠŠæ‰€æœ‰ wiki æ–‡ä»¶è½¬æ¢æˆ HTML ç½‘é¡µ
" :help vimwiki-commands -- æ˜¾ç¤ºå…¨éƒ¨å‘½ä»¤
Plugin 'vimwiki/vimwiki'

"********************************************************************************
" æ‰€æœ‰æ’ä»¶éœ€è¦åœ¨ä¸‹é¢è¿™è¡Œä¹‹å‰é…ç½®
call vundle#end()            " å¿…é¡»
filetype plugin indent on    " å¿…é¡» åŠ è½½vimè‡ªå¸¦å’Œæ’ä»¶ç›¸åº”çš„è¯­æ³•å’Œæ–‡ä»¶ç±»å‹ç›¸å…³è„šæœ¬

